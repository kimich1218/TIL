# 캐시
웹 캐시는 자주 쓰이는 문서의 사본을 자동으로 보관하는 HTTP 장치다. 웹 요청이 캐시에 도착했을 때 캐시된 로컬 사본이 존재한다면, 그 문서는 원 서버가 아니라 캐시로부터 제공 된다. 다음과 같은 이점을 제공한다.
- 불필요한 데이터 전송을 줄여서, 네트워크 요금으로 인한 비용을 줄여준다.
- 네트워크 병목을 줄여준다. 대역폭을 늘리지 않아도 페이지를 빨리 불러드린다.
- 원 서버에 대한 요청을 줄여준다. 서버는 부하를 줄일 수 있어 응답을 더 빠르게 할 수 있다.
- 거리로 인한 지연을 줄여준다.

그렇다면 문서를 캐시에 저장 할 수 있을까? 그렇지 않다. 캐시의 용량은 정해져있을 뿐더라 캐시를 유지하는 비용도 증가하게 된다. 그렇다면 이러한 캐시를 어떻게 유지, 관리 할 수 있을까?

### 적중과 부적중
적중: 캐시에 요청이 도착했을 때, 그에 대응 하는 사본이 있다면 요청을 바로 처리 할 수 있는 것을 말한다.
부적중: 캐시에 요청이 도착했을 때, 그에 대응하는 사본이 없다면 원 서버로 전달 되는 것을 말한다.
![](https://github-production-user-asset-6210df.s3.amazonaws.com/82080962/378163311-287c01f8-7d51-4653-b0bf-f83e7a993331.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20241020%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20241020T072039Z&X-Amz-Expires=300&X-Amz-Signature=52b64afe2cad15c3cde2c5a5893c020f5569b729fcc8f5716e4442558544ad45&X-Amz-SignedHeaders=host)<!-- {"width":359} -->

### 재검사
원 서버 콘텐체는 변경이 될 수 있기 때문에 캐시는 반드시 그들이 갖고 있는 사본이 최신인지 점검해야 한다. 이러한 ‘신선도 검사’를 재검사라고 한다.
사본이 오래된 경우에만 사본을 재검사한다. 재검사를 하여 콘텐츠가 변경되지 않으면 304 Not Modified을 응답한다. 서버 객체가 사본과 다를 경우 일반적인 HTTP 200 OK 응답을 보낸다. 서버 객체가 삭제 되었을 경우 404 Not Found 응답을 돌려보내며, 캐시는 사본을 삭제한다.

### 캐시 토폴리지
캐시는 한명에게만 할당 될 수 있고 여러 명에게 공유 될 수 있다. 한명에게만 할당 된 캐시를 개인 전용 캐시라고 하고 공유된 캐시는 공용 캐시라고 한다.

#### 개인 전용캐시
개인 전용 캐시는 많은 에너지나 저장 공간을 필요로 하지 않으므로, 작고 저렴할 수 있다.
![](https://github-production-user-asset-6210df.s3.amazonaws.com/82080962/378163305-8fcc70d4-b417-4ad5-9c56-2f95af7168ce.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVCODYLSA53PQK4ZA%2F20241020%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20241020T072102Z&X-Amz-Expires=300&X-Amz-Signature=99fb2fc3856c439064a40d56c0aaa50567eafcd00a0ff342f1399d99224ff8d7&X-Amz-SignedHeaders=host)<!-- {"width":475} -->
#### 공용 프락시 캐시
공용 캐시는 캐시 프락시 서버 혹은 프락시 캐시라고 불리는 특별한 종류의 프락시 서버다. 프락시 서버는 로컬 캐시에서 문서를 제공하거나 사용자의 입장에서 서버에 접근한다. 공용 캐시에는 여러 사용자가 접근하기 때문에, 불필요한 트래픽을 줄일 수 있는 장점이 있다.


