## 데이터베이스 엔진

### 정의
데이터베이스 엔진 또는 스토리지 엔진은 데이터베이스 관리시스템(DBMS)이 데이터베이스에 대해 데이터를 삽입, 추출, 업데이트 및 삭제(CRUD)를 하는데 사용하는 기본 소프트웨어 컴포넌트이다.

#### MySQL의 스토리지 엔진
* InnoDB 엔진
* MyISAM 엔진
* Memory 엔진
* Archive 엔진
* CSV 엔진
* Federated 엔진
![](image.png)

### MyISAM
- 2009년 12월 이전 버전의 MySQL 관계형 데이터베이스 관리 시스템에서 기본 저장 엔진
- 오래된 ISAM 코드를 기반으로 하지만 많은 유용한 확장 기능을 갖고 있음

### InnoDB
- InnoDB는 데이터베이스 관리 시스템 MySQL과 MariaDB의 저장 엔진
- 2010년 MySQL 5.5.5가 출시된 이후로는 MyISAM을 MySQL의 기본 테이블 유형을 대체

### MyISAM과 InnoDB의 차이점


#### 1. 트랜잭션
- 비트랜잭션: 쓰기 옵션을 수동으로 롤백
- 트랜잭션: 쓰기 옵션이 완료되지 않으면 자동으로 롤백

> MyISAM은 비트랜잭션인 반면 InnoDB는 트랜잭션 유형의 스토리지 엔진

#### 2. LOCKING
잠금은 두 명 이상의 사용자가 동시에 데이터를 수정하는 것을 방지하는 옵션임.
잠금 옵션이 활성화되어 있을 때는 사용자가 데이터를 수정할 수 없으며 모든 데이터의 유효성을 보존함.

**MyISAM**
- 테이블 잠금 방식을 사용
- 이 방식은 한 세션만이 테이블을 수정할 수 있게 허용
- 테이블 잠금 방식은 읽기 전용 데이터베이스에 가장 적합하며, 많은 메모리를 요구하지 않음

**InnoDB**
- 행 단위 잠금(row-level locking)을 사용이 방식
- 여러 사용자가 있는 데이터베이스에 가장 적합 
- 많은 메모리를 요구하며 데이터 쿼리 및 수정 시간이 더 걸림


> MyISAM은 테이블 locking을 사용
> InnoDB은 행 locking을 사용

#### 3. 왜래 키
외래 키(Foreign Key)는 하나의 테이블에 있는 열(또는 열들의 집합)이 다른 테이블의 열(또는 열들의 집합)과 연결되는 것임. 데이터의 무결성을 유지하는 데 핵심적인 역할을 함.

> MyISAM은 foreign key를 지원하지 않음
> InnoDB은 foreign key를 지원함

#### 4. 데이터 저장 구조
**MyISAM**
* **.frm 파일**: 테이블 구조 또는 테이블 정의를 포함하는 파일
* **.myi 파일**: 각 테이블의 인덱스를 포함하는 파일
* **.myd 파일**: 각 테이블의 데이터를 실제로 저장하는 파일


**InnoDB**
* **.ibd 파일**: 개별 테이블 데이터와 인덱스를 저장할 수 있는 파일

#### 5. ACID 지원
ACID는 데이터베이스 트랜잭션 속성을 의미
- 원자성(Atomicity), 일관성(Consistency), 고립성(Isolation), 지속성(Durability)
- 이는 오류나 시스템 실패가 발생한 경우에도 트랜잭션이 완료됨을 보장

1. 원자성: 트랜잭션이 데이터베이스에 모든 변경을 완전히 적용하거나 전혀 적용하지 않아야 함
2. 일관성: 트랜잭션이 완료된 후에 데이터베이스가 일관된 상태를 유지해야 함
3. 고립성: 동시에 실행되는 여러 트랜잭션이 서로 영향을 주지 않도록 보장하는 것
4. 지속성: 트랜잭션이 성공적으로 완료되면, 그 결과가 영구적으로 DB에 저장됨을 보장

> MyISAM은 ACID를 지원하지 않음
> InnoDB은 ACID를 지원

| 특징              | InnoDB                         | MyISAM                                     |
|-----------------|--------------------------------|--------------------------------------------|
| **트랜잭션 지원**     | 지원 (완전한 ACID 지원)               | 지원하지 않음                                    |
| **잠금 수준**       | 행 단위 잠금 (Row-level Lock)       | 테이블 단위 잠금 (Table-level Lock)               |
| **외래 키 지원**     | 지원                             | 지원하지 않음                                    |
| **데이터 저장 구조**   | .ibd 파일 (테이블 데이터와 인덱스 포함)      | .frm, .myd (데이터), .myi (인덱스) 파일            |
| **복구와 데이터 무결성** | 높은 데이터 무결성과 복구 가능성 제공          | 데이터 복구와 무결성 제공이 제한적                        |
| **사용 사례**       | 복잡한 트랜잭션과 고도의 데이터 관리 요구 사항에 적합 | 간단한 웹 기반 응용 프로그램 및 블로그 등 읽기 중심의 애플리케이션에 적합 |
